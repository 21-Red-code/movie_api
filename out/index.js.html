<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const express = require('express');
const cors = require('cors');
const app = express();
app.use(cors());

const bodyParser = require('body-parser');
app.use(bodyParser.json()); 
app.use(bodyParser.urlencoded({ extended: true }));

//(app) argument makes express to be available in auth.js as well
let auth = require('./auth')(app);

/**
 * to import routes from routes folder
 */
const moviesRoute = require('./routes/movies');
const usersRoute = require('./routes/users');
const directorsRoute = require('./routes/directors');
const genresRoute = require('./routes/genres');

const passport = require('passport');
require('./passport');

app.use(passport.initialize());

const Models = require('./models.js');
const mongoose = require('mongoose');
require('dotenv/config');

// to connect to local DB
//mongoose.connect('mongodb://localhost:27017/myFlixDB', { useNewUrlParser: true, useUnifiedTopology: true });

//  for connecting with MongoDB Atlas 
//mongoose.connect(
//  process.env.classic_movies, 
//  { useNewUrlParser: true, 
//    useUnifiedTopology: true 
//  }
//); 

//to push any changes to Heroku
mongoose.connect(
  process.env.ClassicMovies_URI, 
  { useNewUrlParser: true, 
    useUnifiedTopology: true 
  }
); 

const Movies = Models.Movie;
const Directors = Models.Director;
const Genres = Models.Genre;
const Users = Models.User;

app.use(express.json())

// import express-validator 
const {check, validationResult} = require('express-validator');
const { response } = require('express');

//***** Routes

/**
 * GET request to the home page ('/') endpoint.
 * @method GET
 * @param {string} URL 
 * @param {requestCallback}
 * @returns {string} The welcome message.
 */ 
app.get('/', (req, res) => {
  res.send('Welcome to Classic Movies collection!')
})

// route to documentation page
/**
 * GET request to the documentation page page ('/documentation') endpoint.
 * @method GET
 * @param {string} URL 
 * @param {requestCallback}
 * @returns {Html} Documentation page
 */ 
app.get('/documentation', (req, res) => {
  res.sendFile('public/documentation.html', { root: __dirname});
});

app.use('/movies', moviesRoute);

app.use('/users', usersRoute);

app.use('/directors', directorsRoute);

app.use('/genres', genresRoute);


// Error handler
app.use((err, req, res, next) => {
  console.log(err.stack);
  res.status(500).send('something went wrong');
});


const PORT = process.env.PORT || 8080;
app.listen(PORT, '0.0.0.0',() => {
  console.log('Listening on Port ' + PORT);
});





</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#GET">GET</a></li><li><a href="global.html#moviesRoute">moviesRoute</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Thu Mar 17 2022 11:09:24 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
